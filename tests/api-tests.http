# Archivo de configuración de pruebas Postman/Insomnia

# Base URL
@baseUrl = http://localhost:3001

### Productos

# Obtener todos los productos
GET {{baseUrl}}/api/products

# Obtener producto específico
GET {{baseUrl}}/api/products/prod_123

# Crear producto (Admin)
POST {{baseUrl}}/api/products
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "id": "prod_123",
  "title": "Paquete Premium Lookmaxing",
  "slug": "paquete-premium-lookmaxing",
  "description": "Transformación completa de tu apariencia",
  "features": ["Consulta personalizada", "Rutina skincare", "Tips de estilo"],
  "price_cop": 250000,
  "duration_days": 30,
  "images": ["https://example.com/image1.jpg"],
  "sku": "PKG-PREMIUM-001",
  "inventory": 10
}

### Órdenes

# Crear orden
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "items": [
    {
      "product_id": "prod_123",
      "quantity": 1
    }
  ],
  "payment_method": "paypal",
  "user_email": "cliente@example.com",
  "user_phone": "3001234567"
}

# Obtener órdenes (Usuario autenticado)
GET {{baseUrl}}/api/orders
Authorization: Bearer {{user_token}}

# Obtener orden específica
GET {{baseUrl}}/api/orders/ord_123
Authorization: Bearer {{user_token}}

### Pagos PayPal

# Crear pago PayPal
POST {{baseUrl}}/api/payments/paypal/create
Content-Type: application/json

{
  "order_id": "ord_123",
  "return_url": "https://lookmaxing.com/payment/success",
  "cancel_url": "https://lookmaxing.com/payment/cancel"
}

# Capturar pago PayPal
POST {{baseUrl}}/api/payments/paypal/capture/PP_ORDER_ID
Content-Type: application/json

### Pagos Nequi

# Crear pago Nequi
POST {{baseUrl}}/api/payments/nequi/create
Content-Type: application/json

{
  "order_id": "ord_123",
  "phone": "3001234567",
  "return_url": "https://lookmaxing.com/payment/success"
}

### Webhooks

# Webhook PayPal (no requiere autenticación)
POST {{baseUrl}}/api/webhooks/paypal
Content-Type: application/json

{
  "id": "WH-1234567890",
  "event_type": "PAYMENT.CAPTURE.COMPLETED",
  "resource": {
    "id": "PAYPAL_ORDER_ID"
  }
}

# Webhook Nequi (no requiere autenticación)
POST {{baseUrl}}/api/webhooks/nequi
Content-Type: application/json

{
  "eventType": "PAYMENT_COMPLETED",
  "paymentId": "NEQUI_PAYMENT_ID",
  "status": "COMPLETED"
}

### Admin

# Dashboard stats
GET {{baseUrl}}/api/admin/dashboard/stats
Authorization: Bearer {{admin_token}}

# Gestión de órdenes
GET {{baseUrl}}/api/admin/orders
Authorization: Bearer {{admin_token}}

# Gestión de productos
GET {{baseUrl}}/api/admin/products
Authorization: Bearer {{admin_token}}

# Logs de pagos
GET {{baseUrl}}/api/admin/payments
Authorization: Bearer {{admin_token}}

### Variables de entorno para pruebas

@admin_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
@user_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

### Scripts de utilidad

# Crear usuario de prueba
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "name": "Usuario de Prueba",
  "phone": "3001234567"
}

# Login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

# Health check
GET {{baseUrl}}/health
